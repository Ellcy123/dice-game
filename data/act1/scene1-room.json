{
  "sceneId": "act1-scene1",
  "sceneName": "密室",
  "description": "你们醒来后发现被困在一个密室当中。你好像听到了有人在哭泣，密室的布局很奇怪，有一汪水潭，一个行李箱，一个衣柜。",

  "characters": {
    "cat": {
      "id": "cat",
      "name": "天一",
      "icon": "🐱",
      "maxHp": 8,
      "description": "猫咪，灵活敏捷但怕水"
    },
    "dog": {
      "id": "dog",
      "name": "二水",
      "icon": "🐶",
      "maxHp": 8,
      "description": "狗狗，力量强大且忠诚"
    },
    "turtle": {
      "id": "turtle",
      "name": "包子",
      "icon": "🐢",
      "maxHp": 8,
      "description": "乌龟，防御力高且擅长游泳"
    }
  },

  "initialState": {
    "catCanMove": false,
    "dogCanMove": false,
    "turtleCanMove": true,
    "description": "猫、狗无法行动，需龟与主持人对话触发关键词对应的剧情内容，拯救伙伴并逃脱。",
    "collectedLetters": [],
    "discoveredAreas": ["water-pond", "suitcase", "closet"],
    "playerItems": {}
  },

  "areas": {
    "water-pond": {
      "areaId": "water-pond",
      "name": "水潭",
      "description": "一汪清澈的水潭，水面平静如镜。",
      "visible": true
    },
    "suitcase": {
      "areaId": "suitcase",
      "name": "行李箱",
      "description": "一个带密码锁的行李箱，锁着三位数密码（000）。",
      "visible": true,
      "locked": true,
      "password": "000"
    },
    "closet": {
      "areaId": "closet",
      "name": "衣柜",
      "description": "一个大衣柜，看起来很普通。",
      "visible": true
    },
    "hidden-room": {
      "areaId": "hidden-room",
      "name": "小房间",
      "description": "衣柜后的隐藏房间，房间内有一个巨大的囚笼，狗被困在其中，房间内还有一个花瓶和一个电脑。墙上有一扇只可以用四位密码触发打开的大门。",
      "visible": false
    },
    "cage": {
      "areaId": "cage",
      "name": "囚笼",
      "description": "小房间内的巨大囚笼，二水被困在其中。",
      "visible": false,
      "locked": true
    },
    "vase": {
      "areaId": "vase",
      "name": "花瓶",
      "description": "小房间内的花瓶，看起来很精致。",
      "visible": false
    },
    "computer": {
      "areaId": "computer",
      "name": "电脑",
      "description": "小房间内的电脑，显示器似乎坏了。",
      "visible": false
    },
    "big-door": {
      "areaId": "big-door",
      "name": "大门",
      "description": "墙上有一扇需要四位密码的大门，这是逃出去的唯一出口。",
      "visible": false,
      "locked": true,
      "password": "ECHO"
    }
  },

  "interactions": [
    {
      "keyword": "水潭+龟",
      "aliases": ["水潭+包子", "包子+水潭", "龟+水潭"],
      "triggerBy": ["turtle"],
      "condition": null,
      "effect": {
        "type": "getItem",
        "itemId": "wooden-box",
        "storyText": "包子潜入水中，凭借出色的游泳技能很快就找到了一个木盒。你把木盒带到了岸上，但发现木盒无法打开。水下似乎还有其他物品，但你无法拿取。",
        "addToInventory": true
      },
      "used": false
    },
    {
      "keyword": "水潭+猫",
      "aliases": ["水潭+天一", "天一+水潭", "猫+水潭"],
      "triggerBy": ["cat"],
      "condition": {"catCanMove": true},
      "effect": {
        "type": "damage",
        "target": "cat",
        "value": -1,
        "storyText": "天一看着水潭，想着包子能下去，我肯定也行！于是纵身一跃跳入水中。但天一不会游泳，在水中挣扎起来。好在包子及时把天一救了上来，但因为呛水，天一的生命值-1。"
      },
      "used": false
    },
    {
      "keyword": "水潭+狗",
      "aliases": ["水潭+二水", "二水+水潭", "狗+水潭"],
      "triggerBy": ["dog"],
      "condition": {"dogCanMove": true},
      "effect": {
        "type": "getItem",
        "itemId": "monitor",
        "storyText": "二水跳入水潭，在水底摸索了一番，从水中捞起了一个显示器。虽然湿漉漉的，但感觉还能用。",
        "addToInventory": true
      },
      "used": false
    },
    {
      "keyword": "水潭+行李箱",
      "aliases": ["行李箱+水潭"],
      "triggerBy": ["cat", "dog", "turtle"],
      "condition": null,
      "effect": {
        "type": "story",
        "storyText": "你们把行李箱推到水潭边，想做成一艘船（取名'梅利号'）。但行李箱很快就沉了下去，你们只好把它打捞上来。看来这个想法不太靠谱。"
      },
      "used": false
    },
    {
      "keyword": "水潭+电脑",
      "aliases": ["电脑+水潭"],
      "triggerBy": ["cat", "dog", "turtle"],
      "condition": {"hasItem": "computer-full"},
      "effect": {
        "type": "riverGod",
        "storyText": "你们不小心把电脑掉进了水潭。突然，水面泛起涟漪，一个神秘的身影从水中浮现——河神出现了！\n\n河神问道：'年轻人，你掉的是这台金电脑，还是这台银电脑，还是这台普通电脑？'\n\n如果诚实回答是普通电脑，河神会赞赏你的诚实，并赐予你生命值+1的祝福。"
      },
      "used": false
    },
    {
      "keyword": "行李箱+龟",
      "aliases": ["行李箱+包子", "包子+行李箱", "龟+行李箱"],
      "triggerBy": ["turtle"],
      "condition": null,
      "effect": {
        "type": "unlockAndRescue",
        "target": "cat",
        "storyText": "包子仔细观察行李箱的密码锁，三位数字锁显示着000。包子尝试转动密码锁，咔哒一声，行李箱打开了！\n\n里面蜷缩着天一，看起来被困了很久。天一虚弱地爬了出来，活动了一下身体后，恢复了行动能力。\n\n'谢谢你，包子！'天一感激地说。",
        "unlockCat": true
      },
      "used": false
    },
    {
      "keyword": "行李箱+猫",
      "aliases": ["行李箱+天一", "天一+行李箱", "猫+行李箱"],
      "triggerBy": ["cat"],
      "condition": {"catCanMove": true, "suitcaseUnlocked": true},
      "effect": {
        "type": "getItem",
        "itemId": "key",
        "storyText": "天一用锋利的爪子撕开了行李箱的内衬，在夹层中发现了一把钥匙！这把钥匙看起来很特别，应该能打开某个锁。",
        "addToInventory": true
      },
      "used": false
    },
    {
      "keyword": "衣柜+龟",
      "aliases": ["衣柜+包子", "包子+衣柜", "龟+衣柜"],
      "triggerBy": ["turtle"],
      "condition": null,
      "effect": {
        "type": "discoverArea",
        "areas": ["hidden-room", "cage", "vase", "computer", "big-door"],
        "storyText": "包子在衣柜下方摸索时，突然发现了一个隐藏的按钮。按下按钮后，衣柜发出'咔嚓'一声，缓缓向旁边移动。\n\n衣柜后面居然隐藏着一个小房间！\n\n房间内有一个巨大的囚笼，二水被困在其中，正可怜巴巴地看着你们。房间里还有一个精致的花瓶和一台电脑。最重要的是，墙上有一扇需要四位密码的大门！",
        "unlockAreas": true
      },
      "used": false
    },
    {
      "keyword": "衣柜+猫",
      "aliases": ["衣柜+天一", "天一+衣柜", "猫+衣柜"],
      "triggerBy": ["cat"],
      "condition": {"catCanMove": true},
      "effect": {
        "type": "getLetter",
        "letter": "C",
        "storyText": "天一灵巧地爬上衣柜顶部，在厚厚的灰尘中发现了一个模糊的字母：C\n\n'这个字母可能跟大门的密码有关！'天一把字母记了下来。",
        "addLetter": true
      },
      "used": false
    },
    {
      "keyword": "衣柜+钥匙",
      "aliases": ["钥匙+衣柜"],
      "triggerBy": ["cat", "dog", "turtle"],
      "condition": {"hasItem": "key"},
      "effect": {
        "type": "getItem",
        "itemId": "red-crystal-heart",
        "rewardHp": 1,
        "reusable": true,
        "storyText": "你们用钥匙打开了衣柜的暗格，里面放着一颗闪闪发光的红水晶心！\n\n拿起水晶心后，温暖的能量流遍全身，所有人的生命值都+1！\n\n神奇的是，暗格在关闭后又恢复了，钥匙还可以继续使用。",
        "addToInventory": true
      },
      "used": false
    },
    {
      "keyword": "木盒+狗",
      "aliases": ["木盒+二水", "二水+木盒", "狗+木盒"],
      "triggerBy": ["dog"],
      "condition": {"hasItem": "wooden-box", "dogCanMove": true},
      "effect": {
        "type": "getLetter",
        "letter": "E",
        "storyText": "二水用强有力的牙齿咬住木盒，用力一咬——咔嚓！木盒裂开了！\n\n里面掉出一张字条，上面写着字母：E\n\n'又一个密码字母！'大家兴奋地说。",
        "addLetter": true
      },
      "used": false
    },
    {
      "keyword": "显示器+电脑",
      "aliases": ["电脑+显示器"],
      "triggerBy": ["cat", "dog", "turtle"],
      "condition": {"hasItem": "monitor", "areaDiscovered": "computer"},
      "effect": {
        "type": "getLetter",
        "letter": "H",
        "storyText": "你们把从水潭捞起的显示器接到电脑上，按下电源键。电脑屏幕亮了起来，显示着一个大大的字母：H\n\n'太好了，又一个字母！'",
        "addLetter": true,
        "createItem": "computer-full"
      },
      "used": false
    },
    {
      "keyword": "钥匙+囚笼",
      "aliases": ["囚笼+钥匙"],
      "triggerBy": ["cat", "turtle"],
      "condition": {"hasItem": "key", "areaDiscovered": "cage"},
      "effect": {
        "type": "unlockAndRescue",
        "target": "dog",
        "storyText": "你们用钥匙打开了囚笼的锁，二水兴奋地冲了出来！\n\n'终于自由了！谢谢你们！'二水摇着尾巴说道。\n\n二水恢复了行动能力。",
        "unlockDog": true
      },
      "used": false
    },
    {
      "keyword": "花瓶",
      "aliases": ["查看花瓶", "检查花瓶"],
      "triggerBy": ["cat", "dog", "turtle"],
      "condition": {"areaDiscovered": "vase"},
      "effect": {
        "type": "getLetter",
        "letter": "O",
        "storyText": "你们仔细查看花瓶，发现瓶底刻着一个字母：O\n\n'现在我们有C、H、E、O四个字母了！'",
        "addLetter": true
      },
      "used": false
    }
  ],

  "items": {
    "wooden-box": {
      "itemId": "wooden-box",
      "name": "木盒",
      "description": "从水潭中获得的神秘木盒，似乎需要强力才能打开"
    },
    "monitor": {
      "itemId": "monitor",
      "name": "显示器",
      "description": "从水潭捞起的显示器，虽然湿了但还能用"
    },
    "key": {
      "itemId": "key",
      "name": "钥匙",
      "description": "从行李箱夹层中找到的钥匙，可以重复使用"
    },
    "red-crystal-heart": {
      "itemId": "red-crystal-heart",
      "name": "红水晶心",
      "description": "闪闪发光的红水晶心，蕴含生命能量"
    },
    "computer-full": {
      "itemId": "computer-full",
      "name": "完整的电脑",
      "description": "接上显示器的完整电脑"
    }
  },

  "winCondition": {
    "type": "password",
    "password": "ECHO",
    "door": "big-door",
    "requiredLetters": ["C", "H", "E", "O"],
    "description": "收集字母C、H、E、O，组合成密码'ECHO'即可打开大门逃出密室",
    "successText": "你们输入密码'ECHO'，大门发出沉重的响声，缓缓打开了！\n\n光芒从门外照射进来，你们终于可以逃出这个密室了！\n\n恭喜你们通过了第一关：密室逃脱！"
  }
}
